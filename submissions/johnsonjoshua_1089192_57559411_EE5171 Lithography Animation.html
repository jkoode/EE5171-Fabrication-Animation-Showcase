<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8" />
<title>EUV Lithography – Tin Droplet Source (UMN, v8, performance tuned)</title>
<!-- v8: Reduced animation + heavy blur/filters for smoother performance while keeping overall look. -->
<style>
:root {
    --bg: #02030a;
    --chamber: #090d1a;
    --accent: #34d0ff;
    --laser: #ff7043;
    --plasma: #ffeb3b;
    --euv: #b388ff;
    --umn-maroon: #7a0019;
    --umn-gold: #ffcc33;
    --text-soft: #b0c4ff;

    --cycle-source: 2.8s;
    --cycle-stage: 5.2s;
    --plasma-scale: 1;
    --plasma-brightness: 1;
    --collector-gain: 1;
}
*{box-sizing:border-box;margin:0;padding:0;}
body{
    margin:0;
    background:radial-gradient(circle at 10% 10%,#10152a 0,var(--bg) 40%,#000 100%);
    color:#f5f7ff;
    font-family:system-ui,-apple-system,BlinkMacSystemFont,"SF Pro Text",sans-serif;
    overflow:hidden;
}
.scene{position:relative;width:100vw;height:100vh;background:radial-gradient(circle at 20% 20%,rgba(140,158,255,0.12),transparent 60%),radial-gradient(circle at 80% 80%,rgba(171,71,188,0.14),transparent 60%);}
.scene::before{
    content:"";
    position:absolute;
    inset:-10vmax;
    background-image:
      linear-gradient(120deg,rgba(55,71,79,0.28) 1px,transparent 1px),
      linear-gradient(60deg,rgba(55,71,79,0.18) 1px,transparent 1px);
    background-size:40px 40px,40px 40px;
    opacity:0.18;
    mix-blend-mode:soft-light;
    pointer-events:none;
}
.floor-glow{
    position:absolute;
    left:50%;
    bottom:4vh;
    width:60vw;
    height:22vh;
    transform:translateX(-50%);
    background:radial-gradient(ellipse at 50% 100%,rgba(144,164,255,0.23) 0,rgba(144,164,255,0.05) 40%,transparent 70%);
    opacity:0.9;
    pointer-events:none;
}
.chamber{
    position:absolute;
    inset:7vh 4vw 20vh 4vw; /* bottom 20vh leaves room for controls + logo */
    border-radius:40px;
    background:
      radial-gradient(circle at 20% 20%,rgba(255,255,255,0.08),transparent 55%),
      linear-gradient(135deg,#050915,#050711);
    box-shadow:
      0 0 0 1px rgba(255,255,255,0.05),
      0 25px 60px rgba(0,0,0,0.85),
      inset 0 0 0 1px rgba(175,210,255,0.06);
    overflow:hidden;
}
.chamber::after{
    content:"";
    position:absolute;
    left:0;right:0;bottom:0;height:6px;
    background:linear-gradient(90deg,var(--umn-maroon),var(--umn-gold),var(--umn-maroon));
    box-shadow:0 -1px 4px rgba(0,0,0,0.7),0 0 14px rgba(255,204,51,0.28);
}
.chamber-inner{
    position:absolute;
    inset:3vh 3vw;
    border-radius:32px;
    background:radial-gradient(circle at 10% 80%,#101325 0,#050713 45%,#000 100%);
    border:1px solid rgba(103,143,255,0.15);
    box-shadow:inset 0 0 40px rgba(0,0,0,0.9);
    overflow:hidden;
}
.title-bar{
    position:absolute;inset:0 0 auto 0;
    height:42px;
    display:flex;align-items:center;justify-content:space-between;
    padding:0 24px;
    background:linear-gradient(90deg,#050915,#040612);
    border-bottom:1px solid rgba(120,160,255,0.35);
    box-shadow:0 10px 25px rgba(0,0,0,0.8);
    font-size:13px;letter-spacing:0.12em;text-transform:uppercase;
}
.title-bar span.small{font-size:11px;opacity:0.8;letter-spacing:0.16em;}
.status-dot{width:8px;height:8px;border-radius:50%;background:#00e676;box-shadow:0 0 12px rgba(0,230,118,0.9);margin-right:8px;}
.status{display:flex;align-items:center;gap:14px;font-size:11px;text-transform:none;color:var(--text-soft);}
.status span.key{text-transform:uppercase;font-size:10px;opacity:0.6;}
.status span.value{font-family:"SF Mono",ui-monospace,Menlo,Monaco,Consolas,monospace;font-size:11px;}
.course-tag{
    position:absolute;top:44px;left:26px;
    padding:4px 10px;border-radius:999px;
    background:rgba(10,14,35,0.9);
    border:1px solid rgba(144,164,255,0.5);
    font-size:10px;letter-spacing:0.16em;text-transform:uppercase;
    color:rgba(224,224,255,0.9);
    box-shadow:0 10px 20px rgba(0,0,0,0.65);
}

/* LAYOUT */
.layout{
    position:absolute;
    inset:60px 16px 40px 16px;
    display:grid;
    grid-template-columns:30% 40% 30%;
    grid-template-rows:63% 37%;
    gap:6px 10px;
    color:var(--text-soft);
}

/* Panels & graphics */
.panel{position:relative;border-radius:24px;background:radial-gradient(circle at 0 0,rgba(255,255,255,0.04),transparent 60%);border:1px solid rgba(120,160,255,0.16);box-shadow:0 0 25px rgba(0,0,0,0.9),inset 0 0 20px rgba(0,0,0,0.7);padding:14px 16px;overflow:hidden;}
.panel h2{margin:0 0 6px 0;font-size:13px;text-transform:uppercase;letter-spacing:0.14em;color:#e2e5ff;opacity:0.96;}
.panel p{margin:0;font-size:10px;line-height:1.5;opacity:0.7;}
.panel-label{position:absolute;top:8px;right:14px;font-size:10px;text-transform:uppercase;letter-spacing:0.12em;opacity:0.55;}

.source-panel{grid-row:1 / span 2;grid-column:1 / span 1;}
.source-panel h2{color:#ffcc80;}
.source-graphics{position:absolute;inset:62px 12px 22px 12px;}
.nozzle{position:absolute;width:36px;height:90px;left:40px;top:10px;border-radius:16px;background:linear-gradient(180deg,#1f2438,#121628);box-shadow:0 0 0 1px rgba(181,204,255,0.25),0 10px 20px rgba(0,0,0,0.85);}
.nozzle::before{content:"";position:absolute;inset:-10px 4px auto 4px;height:22px;border-radius:50px;background:radial-gradient(circle at 50% 0%,#a0b4ff,#273153);box-shadow:0 0 15px rgba(144,164,255,0.8),0 0 40px rgba(0,0,0,0.9);}
.nozzle-tip{position:absolute;width:26px;height:14px;left:45px;top:88px;border-radius:0 0 16px 16px;background:radial-gradient(circle at 50% 0%,#cfd7ff,#242840);box-shadow:0 6px 12px rgba(0,0,0,0.8);}

.droplet{
    position:absolute;width:10px;height:14px;left:53px;top:97px;
    background:radial-gradient(circle at 30% 20%,#ffffff,#cfd2dc 35%,#6f7680 70%,#21242a 100%);
    border-radius:50%;box-shadow:0 0 10px rgba(255,255,255,0.4),0 0 25px rgba(136,159,255,0.6);
    transform-origin:50% 0%;
    animation:dropletFall var(--cycle-source) linear infinite;
    will-change:transform,opacity;
}
.droplet.d2{animation-delay:calc(var(--cycle-source)*0.33);opacity:0;}
.droplet.d3{animation-delay:calc(var(--cycle-source)*0.66);opacity:0;}
@keyframes dropletFall{
    0%{transform:translateY(0) scale(0.9);opacity:0;}
    6%{opacity:1;}
    70%{transform:translateY(140px) scale(1);opacity:1;}
    100%{transform:translateY(160px) scale(0.5);opacity:0;}
}

.laser-head{position:absolute;width:110px;height:34px;right:4px;top:40px;background:linear-gradient(180deg,#1d222f,#060913);border-radius:10px;box-shadow:0 0 0 1px rgba(180,205,255,0.25),0 18px 24px rgba(0,0,0,0.9);display:flex;align-items:center;padding:4px 8px;gap:6px;}
.laser-head::before{content:"";width:18px;height:18px;border-radius:50%;border:2px solid rgba(255,255,255,0.6);box-shadow:0 0 10px rgba(255,255,255,0.8);}
.laser-labels{font-size:9px;line-height:1.2;text-transform:uppercase;letter-spacing:0.12em;color:#e5f2ff;}
.laser-labels span{display:block;}
.laser-labels span.power{font-family:"SF Mono",ui-monospace,Menlo,Monaco,Consolas,monospace;font-size:9px;opacity:0.8;text-transform:none;}

.laser-beam-pre,.laser-beam-main{
    position:absolute;width:220px;height:3px;right:50px;top:82px;
    transform-origin:100% 50%;transform:rotate(-19deg);
    opacity:0;will-change:opacity;
}
.laser-beam-pre{background:linear-gradient(90deg,rgba(0,0,0,0),rgba(255,184,108,0.7),rgba(0,0,0,0));animation:laserPulsePre var(--cycle-source) infinite;}
.laser-beam-main{background:linear-gradient(90deg,rgba(0,0,0,0),var(--laser),rgba(0,0,0,0));animation:laserPulseMain var(--cycle-source) infinite;}
@keyframes laserPulsePre{0%,46%{opacity:0;}50%,54%{opacity:0.6;}60%,100%{opacity:0;}}
@keyframes laserPulseMain{0%,56%{opacity:0;}60%,64%{opacity:1;}72%,100%{opacity:0;}}

.plasma-wrapper{
    position:absolute;left:110px;top:140px;width:110px;height:110px;
    pointer-events:none;
}
.plasma{
    position:absolute;inset:0;border-radius:50%;
    background:radial-gradient(circle,rgba(255,255,255,1) 0,rgba(255,244,199,1) 15%,rgba(255,193,7,0.8) 35%,rgba(255,87,34,0.5) 55%,rgba(120,50,255,0.45) 70%,rgba(0,0,0,0) 78%);
    mix-blend-mode:screen;opacity:0;
    transform:scale(calc(0.5*var(--plasma-scale)));
    animation:plasmaFlash var(--cycle-source) infinite;
    will-change:transform,opacity;
}
@keyframes plasmaFlash{
    0%,60%{opacity:0;transform:scale(calc(0.3*var(--plasma-scale)));}
    64%{opacity:1;transform:scale(calc(0.9*var(--plasma-scale)));}
    78%{opacity:0.4;transform:scale(calc(1.2*var(--plasma-scale)));}
    100%{opacity:0;transform:scale(calc(1.35*var(--plasma-scale)));}
}

.euv-cone{
    position:absolute;width:260px;height:260px;left:140px;top:180px;
    background:radial-gradient(circle at 50% 10%,rgba(255,255,255,0.9) 0,rgba(179,136,255,0.9) 20%,rgba(123,31,162,0.6) 40%,rgba(0,0,0,0) 70%);
    opacity:0.0;transform-origin:20% 0%;transform:scale(0.2);
    mix-blend-mode:screen;animation:euvPulse var(--cycle-source) infinite;
    will-change:transform,opacity;
}
@keyframes euvPulse{
    0%,64%{opacity:0;transform:scale(0.3);}
    70%{opacity:0.9;transform:scale(0.8);}
    85%{opacity:0.4;transform:scale(1.05);}
    100%{opacity:0;transform:scale(1.1);}
}

.spark{
    position:absolute;width:4px;height:4px;border-radius:50%;
    background:radial-gradient(circle,#fff,#ffd54f,transparent 70%);
    mix-blend-mode:screen;opacity:0;
    animation:spark var(--cycle-source) infinite;
    will-change:transform,opacity;
}
.spark.s1{left:145px;top:130px;animation-delay:calc(var(--cycle-source)*0.02);}
.spark.s2{left:165px;top:115px;animation-delay:calc(var(--cycle-source)*0.08);}
.spark.s3{left:180px;top:155px;animation-delay:calc(var(--cycle-source)*0.14);}
@keyframes spark{
    0%,60%{opacity:0;transform:scale(0.3) translate(0,0);}
    64%{opacity:0.9;transform:scale(1.1) translate(4px,-2px);}
    80%{opacity:0.2;transform:scale(0.8) translate(8px,-6px);}
    100%{opacity:0;transform:scale(0.7) translate(10px,-8px);}
}

.optics-panel{grid-row:1 / span 1;grid-column:2 / span 1;}
.optics-panel h2{color:#90caf9;}
.optics-graphics{position:absolute;inset:54px 12px 10px 12px;}
.collector{
    position:absolute;width:210px;height:160px;left:50px;top:10px;border-radius:55% 65% 70% 40%;
    background:radial-gradient(circle at 20% 20%,rgba(255,255,255,0.95),rgba(179,229,252,0.7) 14%,rgba(144,202,249,0.3) 24%,rgba(26,35,126,0.0) 55%),conic-gradient(from 180deg at 65% 40%,rgba(179,136,255,0.7),rgba(41,182,246,0.5),rgba(179,136,255,0.8),rgba(94,53,177,0.2),rgba(179,136,255,0.7));
    box-shadow:0 0 0 1px rgba(210,227,255,0.4),0 22px 40px rgba(0,0,0,0.95),0 0 18px rgba(100,181,246,0.4);
}
.collector::after{content:"";position:absolute;inset:8px;border-radius:inherit;background:linear-gradient(135deg,rgba(255,255,255,0.32),transparent);mix-blend-mode:screen;opacity:0.9;}

.mirror-stack{position:absolute;right:16px;top:60px;width:100px;height:120px;display:flex;flex-direction:column;justify-content:space-between;align-items:flex-end;}
.mirror{width:70px;height:10px;border-radius:20px;background:linear-gradient(90deg,#e8eaf6,#9fa8da,#3f51b5);box-shadow:0 0 10px rgba(123,31,162,0.7),0 10px 15px rgba(0,0,0,0.9),0 0 8px rgba(159,168,218,0.6);opacity:0.58;transform-origin:0 50%;}
.mirror.m1{transform:rotate(24deg) translateX(-8px);}
.mirror.m2{transform:rotate(12deg) translateX(-4px);}
.mirror.m3{transform:rotate(2deg) translateX(-2px);}
.mirror.m4{transform:rotate(-8deg);}

.beam-segment{
    position:absolute;width:6px;height:90px;right:35px;top:110px;
    background:linear-gradient(180deg,rgba(179,136,255,0.0),rgba(179,136,255,0.9),rgba(26,35,126,0));
    opacity:0;animation:euvColumn var(--cycle-source) infinite;
    will-change:opacity;
}
@keyframes euvColumn{
    0%,68%{opacity:0;}
    72%{opacity:1;}
    88%{opacity:0.55;}
    100%{opacity:0;}
}

.reticle-block{position:absolute;right:12px;bottom:10px;width:90px;height:60px;border-radius:12px;border:1px solid rgba(144,164,255,0.7);background:linear-gradient(180deg,rgba(19,24,45,0.95),#050814);box-shadow:0 12px 25px rgba(0,0,0,0.9);overflow:hidden;}
.reticle-label{position:absolute;left:8px;top:4px;font-size:9px;letter-spacing:0.12em;text-transform:uppercase;color:rgba(224,224,255,0.9);}
.reticle-scale{position:absolute;right:8px;top:4px;font-size:9px;font-family:"SF Mono",ui-monospace,Menlo,Monaco,Consolas,monospace;color:rgba(178,235,242,0.9);}
.reticle-pattern{position:absolute;inset:18px 10px 8px 10px;background-image:repeating-linear-gradient(90deg,rgba(255,255,255,0.95) 0 3px,transparent 3px 6px),repeating-linear-gradient(180deg,rgba(255,255,255,0.35) 0 1px,transparent 1px 4px);mix-blend-mode:screen;}

.mask-beam{
    position:absolute;width:40px;height:4px;left:-30px;top:30px;
    background:linear-gradient(90deg,rgba(100,181,246,0),rgba(100,181,246,0.8),rgba(0,0,0,0));
    opacity:0;animation:maskBeam var(--cycle-source) infinite;
    will-change:transform,opacity;
}
@keyframes maskBeam{
    0%,68%{opacity:0;transform:translateX(0);}
    72%{opacity:0.9;transform:translateX(20px);}
    88%{opacity:0.4;transform:translateX(40px);}
    100%{opacity:0;transform:translateX(50px);}
}

.wafer-panel{grid-row:1 / span 1;grid-column:3 / span 1;}
.wafer-panel h2{color:#aed581;}
.wafer-graphics{position:absolute;inset:56px 10px 10px 10px;}
.stage{position:absolute;width:90%;height:70px;left:5%;bottom:18px;border-radius:22px;background:linear-gradient(180deg,#151925,#040710);box-shadow:0 0 0 1px rgba(166,187,255,0.3),0 22px 40px rgba(0,0,0,0.95),0 0 18px rgba(120,144,255,0.5);overflow:hidden;}
.stage::before{content:"";position:absolute;inset:12px 16px;border-radius:16px;border:1px dashed rgba(120,144,255,0.4);opacity:0.7;}
.stage-label{position:absolute;right:18px;bottom:6px;font-size:8px;font-family:"SF Mono",ui-monospace,Menlo,Monaco,Consolas,monospace;color:rgba(178,235,242,0.75);letter-spacing:0.1em;}

.carriage{
    position:absolute;width:40%;height:50px;top:10px;border-radius:18px;
    background:radial-gradient(circle at 50% 0%,rgba(255,255,255,0.15),rgba(55,71,79,0.9));
    box-shadow:0 0 0 1px rgba(179,229,252,0.35),0 8px 18px rgba(0,0,0,0.9);
    animation:scan var(--cycle-stage) cubic-bezier(0.4,0.0,0.2,1) infinite alternate;
    will-change:transform;
}
@keyframes scan{0%{left:6%;}40%{left:52%;}100%{left:6%;}}

.wafer{position:absolute;width:56px;height:56px;left:50%;top:50%;transform:translate(-50%,-52%);border-radius:50%;background:radial-gradient(circle at 20% 20%,rgba(255,255,255,0.9),rgba(178,235,242,0.8) 18%,rgba(129,212,250,0.6) 30%,rgba(55,71,79,0.95) 75%);box-shadow:0 0 0 1px rgba(187,222,251,0.9),0 0 35px rgba(129,212,250,0.8);overflow:hidden;position:relative;}
.wafer-notch{position:absolute;width:18px;height:10px;bottom:-3px;right:8px;background:#040710;border-radius:0 0 18px 18px;box-shadow:0 -1px 0 rgba(176,190,197,0.6);}
.wafer-grid{position:absolute;inset:14%;background-image:linear-gradient(90deg,rgba(0,0,0,0.55) 1px,transparent 1px),linear-gradient(180deg,rgba(0,0,0,0.55) 1px,transparent 1px);background-size:6px 6px;mix-blend-mode:soft-light;opacity:0.5;}
.dose-map{position:absolute;inset:10%;border-radius:50%;background:radial-gradient(circle,rgba(255,255,255,0.9) 0,rgba(179,136,255,0.7) 30%,rgba(26,35,126,0) 70%);mix-blend-mode:screen;opacity:0;}
.wafer-pattern{position:absolute;inset:18%;background-image:repeating-linear-gradient(90deg,rgba(0,0,0,0.65) 0 1px,rgba(0,0,0,0) 1px 4px),repeating-linear-gradient(180deg,rgba(0,0,0,0.3) 0 1px,rgba(0,0,0,0) 1px 5px);mix-blend-mode:soft-light;opacity:0.08;}

.spot{
    position:absolute;width:22px;height:22px;border-radius:50%;left:46%;top:34%;
    background:radial-gradient(circle,rgba(255,255,255,0.9) 0,rgba(179,136,255,0.9) 40%,rgba(26,35,126,0) 70%);
    mix-blend-mode:screen;opacity:0;
    animation:spotPulse var(--cycle-source) infinite;
    will-change:transform,opacity;
}
@keyframes spotPulse{
    0%,70%{opacity:0;transform:scale(0.4);}
    74%{opacity:1;transform:scale(1.1);}
    84%{opacity:0.6;transform:scale(0.9);}
    100%{opacity:0;transform:scale(0.4);}
}

.pattern-beam{
    position:absolute;width:8px;height:0;left:52%;bottom:50%;
    background:linear-gradient(180deg,rgba(100,181,246,0),rgba(100,181,246,0.7),rgba(179,136,255,0));
    transform:translateX(-50%);
    opacity:0;animation:patternBeam var(--cycle-stage) infinite;
    will-change:height,opacity;
}
@keyframes patternBeam{
    0%{height:0;opacity:0;}
    20%{height:50px;opacity:0.7;}
    60%{height:80px;opacity:0.2;}
    100%{height:0;opacity:0;}
}
.wafer-scale-label{position:absolute;right:10px;top:6px;font-size:9px;font-family:"SF Mono",ui-monospace,Menlo,Monaco,Consolas,monospace;color:rgba(178,235,242,0.9);}

.explain-panel{grid-row:2 / span 1;grid-column:2 / span 2;padding-right:190px;}
.timeline{margin-top:4px;display:grid;grid-template-columns:minmax(40px,70px) 1fr;gap:6px 8px;font-size:11px;}
.timeline-step{font-family:"SF Mono",ui-monospace,Menlo,Monaco,Consolas,monospace;color:rgba(178,235,242,0.85);}
.timeline-desc{color:var(--text-soft);}
.timeline-desc span.keyword{color:rgba(159,168,218,0.98);}
.process-flow{margin-top:8px;display:flex;flex-wrap:wrap;gap:6px;font-size:10px;}
.process-chip{padding:4px 8px;border-radius:999px;border:1px solid rgba(144,164,255,0.4);background:rgba(7,10,30,0.9);box-shadow:0 10px 20px rgba(0,0,0,0.7);letter-spacing:0.12em;text-transform:uppercase;}
.process-chip span.step-num{color:rgba(178,235,242,0.95);margin-right:4px;font-family:"SF Mono",ui-monospace,Menlo,Monaco,Consolas,monospace;}

.side-schematic{
    position:absolute;right:24px;bottom:40px;width:160px;height:120px;
    border-radius:18px;border:1px solid rgba(144,164,255,0.45);
    background:radial-gradient(circle at 0 0,rgba(255,255,255,0.06),transparent 60%),radial-gradient(circle at 100% 100%,rgba(179,136,255,0.1),transparent 60%),#050814;
    box-shadow:0 12px 30px rgba(0,0,0,0.9);padding:8px 10px;font-size:10px;
}
.side-schematic h3{margin:0 0 4px 0;font-size:10px;letter-spacing:0.16em;text-transform:uppercase;color:#e8eaf6;}
.mini{position:absolute;inset:26px 4px 4px 4px;}
.mini-path{position:absolute;left:4px;top:40px;width:100px;height:40px;border-radius:22px;border:1px dashed rgba(120,144,255,0.6);}
.mini-label{position:absolute;font-size:9px;opacity:0.7;}
.mini-label.src{left:6px;top:12px;}
.mini-label.opt{left:55px;top:4px;}
.mini-label.waf{right:6px;bottom:4px;}
.mini-dot{
    position:absolute;width:7px;height:7px;border-radius:50%;
    background:radial-gradient(circle,#fff,#ffb74d,transparent 75%);
    box-shadow:0 0 6px rgba(255,183,77,0.7);
    animation:miniDot var(--cycle-source) infinite;
    will-change:opacity,transform;
}
.mini-dot.d1{left:12px;top:54px;}
.mini-dot.d2{left:46px;top:34px;animation-delay:calc(var(--cycle-source)*0.15);}
.mini-dot.d3{left:83px;top:56px;animation-delay:calc(var(--cycle-source)*0.3);}
@keyframes miniDot{
    0%,30%{transform:scale(0.7);opacity:0.3;}
    40%{transform:scale(1);opacity:1;}
    80%{transform:scale(0.9);opacity:0.7;}
    100%{transform:scale(0.5);opacity:0.3;}
}

/* Control panel: bottom-right, below chamber */
.control-panel{
    position:absolute;
    right:6vw;
    bottom:3vh;
    width:250px;
    border-radius:18px;
    padding:8px 10px 6px 10px;
    background:rgba(4,7,22,0.95);
    border:1px solid rgba(144,164,255,0.45);
    box-shadow:0 14px 30px rgba(0,0,0,0.9);
    font-size:10px;color:var(--text-soft);
    backdrop-filter:blur(5px);
    display:grid;grid-template-columns:1fr;row-gap:4px;
    z-index:20;
}
.control-panel h3{margin:0 0 4px 0;font-size:10px;text-transform:uppercase;letter-spacing:0.16em;color:#e8eaf6;}
.control-row{display:grid;grid-template-columns:120px 1fr;align-items:center;column-gap:8px;margin-top:3px;}
.control-label{font-size:9px;text-transform:uppercase;letter-spacing:0.12em;opacity:0.8;}
.control-panel input[type="range"]{width:100%;}
.control-toggles{margin-top:4px;display:flex;justify-content:space-between;gap:6px;flex-wrap:wrap;}
.toggle{display:flex;align-items:center;gap:4px;font-size:9px;opacity:0.85;}
.toggle input{transform:scale(0.9);}
.metrics{margin-top:6px;border-top:1px solid rgba(120,144,255,0.28);padding-top:4px;display:flex;justify-content:space-between;gap:8px;flex-wrap:wrap;}
.metric{display:flex;flex-direction:column;font-size:9px;}
.metric-label{opacity:0.7;text-transform:uppercase;letter-spacing:0.14em;}
.metric-value{font-family:"SF Mono",ui-monospace,Menlo,Monaco,Consolas,monospace;color:rgba(178,235,242,0.95);}

.status-strip{
    position:absolute;left:20px;right:20px;bottom:14px;height:10px;
    display:flex;justify-content:flex-start;gap:8px;align-items:center;
}
.status-led{width:7px;height:7px;border-radius:50%;background:radial-gradient(circle,#00e676,rgba(0,0,0,0));box-shadow:0 0 10px rgba(0,230,118,0.8);opacity:0.6;animation:ledBlink 4s ease-in-out infinite;}
.status-led:nth-child(2){background:radial-gradient(circle,#29b6f6,rgba(0,0,0,0));box-shadow:0 0 10px rgba(41,182,246,0.9);animation-delay:1.1s;}
.status-led:nth-child(3){background:radial-gradient(circle,#ffca28,rgba(0,0,0,0));box-shadow:0 0 8px rgba(255,202,40,0.8);animation-delay:2.2s;}
@keyframes ledBlink{0%{opacity:0.2;transform:scale(0.8);}30%{opacity:0.9;transform:scale(1);}60%{opacity:0.4;transform:scale(0.9);}100%{opacity:0.2;transform:scale(0.8);}}

/* UMN mark + caption with Ski U Mah */
.umn{position:absolute;left:50%;bottom:2.3vh;transform:translateX(-50%);display:flex;flex-direction:column;align-items:center;gap:2px;pointer-events:none;}
.umn-mark{position:relative;width:120px;height:48px;}
.umn-m{position:absolute;inset:0;background:linear-gradient(180deg,var(--umn-maroon),#3c0010);clip-path:polygon(0% 100%,18% 0%,32% 0%,40% 40%,60% 40%,68% 0%,82% 0%,100% 100%,82% 100%,75% 60%,65% 60%,60% 100%,40% 100%,35% 60%,25% 60%,18% 100%);box-shadow:0 0 0 1px rgba(255,255,255,0.1),0 12px 30px rgba(0,0,0,0.95);overflow:hidden;}
.umn-m::before{content:"";position:absolute;inset:4px 8px 8px 8px;clip-path:inherit;background:linear-gradient(180deg,rgba(255,255,255,0.18),rgba(0,0,0,0));mix-blend-mode:screen;}
.umn-m::after{content:"";position:absolute;inset:2px;clip-path:inherit;border:1px solid rgba(255,204,51,0.5);opacity:0.6;}
.umn-caption{font-size:11px;letter-spacing:0.24em;text-transform:uppercase;color:var(--umn-gold);text-shadow:0 0 12px rgba(0,0,0,0.9);text-align:center;line-height:1.4;}
.umn-caption span.city{color:rgba(255,255,255,0.75);letter-spacing:0.16em;}
.umn-caption span.ski{display:block;font-size:10px;letter-spacing:0.26em;color:rgba(255,255,255,0.9);}

.umn-note{position:absolute;left:12%;bottom:23%;font-size:10px;padding:6px 9px;border-radius:999px;background:rgba(10,14,40,0.9);border:1px solid rgba(178,235,242,0.5);box-shadow:0 12px 24px rgba(0,0,0,0.8);color:var(--text-soft);display:flex;align-items:center;gap:6px;}
.umn-note-dot{width:6px;height:6px;border-radius:50%;background:radial-gradient(circle,var(--umn-gold),rgba(255,255,255,0));box-shadow:0 0 10px rgba(255,204,51,1);}

body.show-rays .beam-segment,
body.show-rays .euv-cone,
body.show-rays .pattern-beam{box-shadow:0 0 16px rgba(255,255,255,0.5);}
body.show-dose .dose-map{opacity:0.7;}

@media(max-width:900px){
    .layout{grid-template-columns:48% 52%;grid-template-rows:50% 24% 26%;inset:60px 10px 50px 10px;}
    .source-panel{grid-row:1 / span 1;}
    .optics-panel{grid-row:1 / span 1;grid-column:2 / span 1;}
    .wafer-panel{grid-row:2 / span 1;grid-column:1 / span 2;}
    .explain-panel{grid-row:3 / span 1;grid-column:1 / span 2;padding-right:6px;}
    .side-schematic{display:none;}
    .control-panel{right:4vw;bottom:8vh;width:230px;}
    .umn{bottom:1.4vh;}
    .course-tag{left:16px;top:44px;}
}
</style>
</head>
<body>
<div class="scene">
    <div class="floor-glow"></div>

    <div class="chamber">
        <div class="chamber-inner">
            <div class="title-bar">
                <div><span class="small">ASML-INSPIRED EUV LITHOGRAPHY – TIN DROPLET LASER-PRODUCED PLASMA</span></div>
                <div class="status">
                    <div class="status-dot"></div>
                    <span class="key">Source</span><span class="value">Sn droplet + CO₂ laser</span>
                    <span class="key">λ</span><span class="value">13.5 nm EUV</span>
                    <span class="key">Mode</span><span class="value">Step-&amp;-scan projection</span>
                </div>
            </div>

            <div class="course-tag">Visualization • EE 3161 / EE 5164 – Lithography &amp; Microfabrication</div>

            <div class="layout">
                <div class="panel source-panel">
                    <h2>Laser-Produced Plasma Source</h2>
                    <span class="panel-label">SOURCE</span>
                    <p>
                        Liquid tin droplets are fired into vacuum and struck by a high-power CO₂ laser.
                        Each pulse vaporizes a droplet into a hot plasma that emits <span class="keyword">extreme ultraviolet</span>
                        light at 13.5&nbsp;nm.
                    </p>
                    <div class="source-graphics">
                        <div class="nozzle"></div>
                        <div class="nozzle-tip"></div>

                        <div class="droplet"></div>
                        <div class="droplet d2"></div>
                        <div class="droplet d3"></div>

                        <div class="laser-head">
                            <div class="laser-labels">
                                <span>CO₂ laser</span>
                                <span class="power">Pre + main pulse</span>
                            </div>
                        </div>
                        <div class="laser-beam-pre"></div>
                        <div class="laser-beam-main"></div>

                        <div class="plasma-wrapper">
                            <div class="plasma"></div>
                        </div>
                        <div class="euv-cone"></div>

                        <div class="spark s1"></div>
                        <div class="spark s2"></div>
                        <div class="spark s3"></div>
                    </div>
                </div>

                <div class="panel optics-panel">
                    <h2>Multilayer Optics &amp; Reticle</h2>
                    <span class="panel-label">COLLECTOR • BRAGG MIRRORS • MASK</span>
                    <p>
                        Highly reflective Mo/Si multilayer mirrors collect and shape the EUV light from the plasma,
                        relaying it through a chain of mirrors and a 4× reticle toward the projection optics and wafer.
                    </p>
                    <div class="optics-graphics">
                        <div class="collector"></div>
                        <div class="mirror-stack">
                            <div class="mirror m1"></div>
                            <div class="mirror m2"></div>
                            <div class="mirror m3"></div>
                            <div class="mirror m4"></div>
                        </div>
                        <div class="beam-segment"></div>

                        <div class="reticle-block">
                            <div class="reticle-label">Reticle (mask)</div>
                            <div class="reticle-scale">4×</div>
                            <div class="reticle-pattern"></div>
                            <div class="mask-beam"></div>
                        </div>
                    </div>
                </div>

                <div class="panel wafer-panel">
                    <h2>Wafer Stage &amp; Photoresist</h2>
                    <span class="panel-label">STEP-&amp;-SCAN PROJECTION</span>
                    <p>
                        The patterned EUV beam is reduced and projected onto a photoresist-coated silicon wafer.
                        The ultra-stiff stage performs a precise step-and-scan motion while features are exposed.
                    </p>
                    <div class="wafer-graphics">
                        <div class="stage">
                            <div class="carriage">
                                <div class="wafer">
                                    <div class="wafer-grid"></div>
                                    <div class="dose-map"></div>
                                    <div class="wafer-pattern"></div>
                                    <div class="spot"></div>
                                    <div class="wafer-notch"></div>
                                </div>
                            </div>
                            <div class="pattern-beam"></div>
                            <div class="stage-label">UMN · 300 mm</div>
                        </div>
                        <div class="wafer-scale-label">Wafer: 1×</div>
                    </div>
                </div>

                <div class="panel explain-panel">
                    <h2>Cycle Timeline (Conceptual)</h2>
                    <span class="panel-label">ONE EUV BURST → ONE SCANNED FIELD</span>
                    <div class="timeline">
                        <div class="timeline-step">1. Droplet</div>
                        <div class="timeline-desc">
                            A tin droplet leaves the nozzle and free-falls through vacuum. Its position is synchronized
                            with the upcoming laser pre-pulse to within a few micrometers.
                        </div>

                        <div class="timeline-step">2. Pre-pulse</div>
                        <div class="timeline-desc">
                            A shaping pulse gently spreads the droplet into a disk, optimizing the
                            <span class="keyword">plasma surface area</span> for efficient EUV emission.
                        </div>

                        <div class="timeline-step">3. Main pulse</div>
                        <div class="timeline-desc">
                            The main CO₂ pulse dumps energy into the tin. The bright <span class="keyword">plasma flash</span> and EUV cone
                            in the animation correspond to this step.
                        </div>

                        <div class="timeline-step">4. Collection</div>
                        <div class="timeline-desc">
                            Multilayer collector mirrors reflect a narrow band around 13.5&nbsp;nm. Unwanted wavelengths,
                            ions, and debris are largely absorbed or deflected away from the optics.
                        </div>

                        <div class="timeline-step">5. Mask &amp; Projection</div>
                        <div class="timeline-desc">
                            The EUV beam illuminates a 4× reticle pattern, which is imaged through Bragg mirrors onto the wafer.
                            The wafer sees a reduced 1× image while the stage performs a smooth step-&amp;-scan motion.
                        </div>

                        <div class="timeline-step">6. Resist dose</div>
                        <div class="timeline-desc">
                            The <span class="keyword">dose profile</span> on the wafer (halo + spot) builds up line/space patterns in the photoresist.
                            Downstream, this will be followed by post-exposure bake, development, and etch.
                        </div>
                    </div>

                    <div class="process-flow">
                        <div class="process-chip"><span class="step-num">1</span>Spin coat resist</div>
                        <div class="process-chip"><span class="step-num">2</span>Soft bake</div>
                        <div class="process-chip"><span class="step-num">3</span>EUV exposure</div>
                        <div class="process-chip"><span class="step-num">4</span>Post-exposure bake</div>
                        <div class="process-chip"><span class="step-num">5</span>Develop</div>
                        <div class="process-chip"><span class="step-num">6</span>Etch / strip</div>
                    </div>
                </div>
            </div>

            <div class="side-schematic">
                <h3>EUV LIGHT PATH</h3>
                <div class="mini">
                    <div class="mini-path"></div>
                    <div class="mini-label src">Sn Plasma</div>
                    <div class="mini-label opt">Mirrors</div>
                    <div class="mini-label waf">Wafer</div>
                    <div class="mini-dot d1"></div>
                    <div class="mini-dot d2"></div>
                    <div class="mini-dot d3"></div>
                </div>
            </div>

            <div class="status-strip">
                <div class="status-led"></div>
                <div class="status-led"></div>
                <div class="status-led"></div>
            </div>
        </div>
    </div>

    <!-- Control panel: HUD at bottom-right -->
    <div class="control-panel">
        <h3>Simulation Controls</h3>
        <div class="control-row">
            <div class="control-label">Pulse rate</div>
            <input id="speedSlider" type="range" min="0.7" max="1.6" step="0.1" value="1.0" />
        </div>
        <div class="control-row">
            <div class="control-label">Laser energy</div>
            <input id="laserSlider" type="range" min="0.6" max="1.4" step="0.1" value="1.0" />
        </div>
        <div class="control-row">
            <div class="control-label">Collector efficiency</div>
            <input id="collectorSlider" type="range" min="0.6" max="1.4" step="0.1" value="1.0" />
        </div>
        <div class="control-toggles">
            <label class="toggle">
                <input id="raysToggle" type="checkbox" />
                <span>Show ray paths</span>
            </label>
            <label class="toggle">
                <input id="doseToggle" type="checkbox" />
                <span>Show dose profile</span>
            </label>
        </div>
        <div class="metrics">
            <div class="metric">
                <span class="metric-label">EUV power</span>
                <span class="metric-value" data-base="250" data-unit=" W">250 W</span>
            </div>
            <div class="metric">
                <span class="metric-label">Droplet rate</span>
                <span class="metric-value" data-base="50" data-unit=" kHz">50 kHz</span>
            </div>
            <div class="metric">
                <span class="metric-label">Source temp</span>
                <span class="metric-value" data-base="220" data-unit=" kK">220 kK</span>
            </div>
        </div>
    </div>

    <div class="umn">
        <div class="umn-mark"><div class="umn-m"></div></div>
        <div class="umn-caption">
            UNIVERSITY OF MINNESOTA <span class="city">•  TWIN CITIES</span>
            <span class="ski">SKI U MAH</span>
        </div>
    </div>

    <div class="umn-note">
        <div class="umn-note-dot"></div>
        <span>Conceptual EUV lithography source &amp; projection — tuned for UMN microfab teaching demos.</span>
    </div>
</div>

<script>
(function(){
    const root=document.documentElement;
    const speedSlider=document.getElementById('speedSlider');
    const laserSlider=document.getElementById('laserSlider');
    const collectorSlider=document.getElementById('collectorSlider');
    const raysToggle=document.getElementById('raysToggle');
    const doseToggle=document.getElementById('doseToggle');

    const baseSource=2.8;
    const baseStage=5.2;
    const stageFactor=baseStage/baseSource;

    function updateSpeed(){
        const factor=parseFloat(speedSlider.value)||1.0;
        const sourcePeriod=baseSource/factor;
        const stagePeriod=(baseSource*stageFactor)/factor;
        root.style.setProperty('--cycle-source',sourcePeriod.toFixed(3)+'s');
        root.style.setProperty('--cycle-stage',stagePeriod.toFixed(3)+'s');
    }
    function updateLaser(){
        const val=parseFloat(laserSlider.value)||1.0;
        root.style.setProperty('--plasma-scale',val.toString());
        root.style.setProperty('--plasma-brightness',val.toString());
    }
    function updateCollector(){
        const val=parseFloat(collectorSlider.value)||1.0;
        root.style.setProperty('--collector-gain',val.toString());
    }
    function updateRaysToggle(){
        if(raysToggle.checked){document.body.classList.add('show-rays');}
        else{document.body.classList.remove('show-rays');}
    }
    function updateDoseToggle(){
        if(doseToggle.checked){document.body.classList.add('show-dose');}
        else{document.body.classList.remove('show-dose');}
    }

    const metricEls=document.querySelectorAll('.metric-value');
    function jitterMetrics(){
        metricEls.forEach(el=>{
            const base=parseFloat(el.getAttribute('data-base')||'0');
            const unit=el.getAttribute('data-unit')||'';
            if(!base)return;
            const jitterFrac=(Math.random()*0.04)-0.02; // lower jitter = less visual noise
            let newVal=base*(1+jitterFrac);
            if(base>=100){newVal=Math.round(newVal);}else{newVal=Math.round(newVal*10)/10;}
            el.textContent=newVal+unit;
        });
    }

    updateSpeed();updateLaser();updateCollector();updateRaysToggle();updateDoseToggle();jitterMetrics();
    speedSlider.addEventListener('input',updateSpeed);
    laserSlider.addEventListener('input',updateLaser);
    collectorSlider.addEventListener('input',updateCollector);
    raysToggle.addEventListener('change',updateRaysToggle);
    doseToggle.addEventListener('change',updateDoseToggle);
    setInterval(jitterMetrics,2500);
})();
</script>
</body>
</html>